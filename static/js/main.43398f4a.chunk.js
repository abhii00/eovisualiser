(this.webpackJsonpeovisualiser=this.webpackJsonpeovisualiser||[]).push([[0],{24:function(t,e,n){},25:function(t,e,n){"use strict";n.r(e);var a=n(16),i=n.n(a),s=n(9),r=n(0),o=n(1),c=n(2),h=n(3),l=n(12),d=n.n(l),u=n(5),v=n(17),m=n(11);function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=e/864e5-e.getTimezoneOffset()/1440+2440587.5;switch(t){case"julian":return n;case"j2000":return n-2451545;case"gmst":return m.b(e);default:return e}}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w("j2000");return(23.439-4e-7*t)*Math.PI/180}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w("j2000"),e=280.46+.9856474*t,n=357.528+.9856003*t,a=p(t);n=n%360*Math.PI/180;var i=e+1.915*Math.sin(n)+.02*Math.sin(2*n);i=i*Math.PI/180;var s=Math.atan2(Math.cos(a)*Math.sin(i),Math.cos(i)),r=Math.asin(Math.sin(a)*Math.sin(i));return[s,r]}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w("j2000"),e=f(t),n=Object(s.a)(e,2),a=n[0],i=n[1],r=new u.c(0,a,i,"XYZ"),o=new u.v(1,0,0);return o.applyEuler(r),o}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w("gmst");return t}var j=n.p+"static/media/earth_2k.981cc3e3.jpg";function b(t,e,n){var a=new u.q(1,60,60),i=new u.i({color:0,side:u.a}),s=new u.h(a,i);s.scale.set(100,100,100),t.add(s);var r=y();r.multiplyScalar(80);var o=new u.m(16777215,1);o.position.copy(r),t.add(o);var c=new u.i,h=new u.h(a,c);h.scale.set(2,2,2),h.position.copy(r),t.add(h);var l=new u.j({map:M(j),metalness:.4,roughness:.8}),d=new u.h(a,l);d.rotation.set(0,g(),0),t.add(d),function a(){requestAnimationFrame(a),n.render(t,e)}()}function M(t){return(new u.t).load(t)}var k=n(10),O=function(){function t(e,n,a,i,s,o){switch(Object(r.a)(this,t),this.raw_data=n,this.scale_factor=a,this.datapoints={},this.scene=i,this.camera=s,this.renderer=o,this.sphere_geometry=new u.q(.01,3,3),this.sphere_material=new u.i,this.line_material=new u.f,this.intersects=[],this.raycaster=new u.o,this.createDataPointInteractions(),this.type=e,this.type){case"satellite-tle":this.processTLEData()}this.renderDataPoints()}return Object(o.a)(t,[{key:"processTLEData",value:function(){for(var t=this.raw_data.split(/\r?\n/),e=new Date,n=5.9722*Math.pow(10,24),a=6.674*Math.pow(10,-11)*n,i=0;i<(t.length-1)/3;i++){var s=3*i,r=m.d(t[s+1],t[s+2]),o=m.c(r,e);if(void 0!==o.position){var c=o.position,h=o.velocity,l=new u.v(h.x,h.z,-h.y),d=new u.v(c.x,c.z,-c.y);l.multiplyScalar(this.scale_factor),d.multiplyScalar(this.scale_factor);var v=m.a(c,w("gmst"));new u.v(v.x,v.z,-v.y).multiplyScalar(this.scale_factor);var p=new u.h(this.sphere_geometry,this.sphere_material.clone());p.position.copy(d),p.name=t[s];for(var f=[],y=Math.cbrt(a/Math.pow(r.no/60,2))*Math.pow(10,-3)*this.scale_factor,g=y*Math.sqrt(1-Math.pow(r.ecco,2)),j=Math.sqrt(Math.pow(y,2)-Math.pow(g,2)),b=0;b<=80;b++){var M=2*b*Math.PI/80,k=new u.v(y*Math.cos(M),0,-g*Math.sin(M));f.push(k)}var O=(new u.b).setFromPoints(f),P=new u.e(O,this.line_material.clone());P.rotateOnAxis(new u.v(0,1,0),r.nodeo),P.rotateOnAxis(new u.v(1,0,0),r.inclo),P.rotateOnAxis(new u.v(0,1,0),r.argpo),P.translateOnAxis(new u.v(1,0,0),-j);var _=new D(p,P);this.datapoints[t[s]]=_}}}},{key:"renderDataPoints",value:function(){for(var t in this.datapoints)this.scene.add(this.datapoints[t].mesh)}},{key:"updateIntersects",value:function(t){return this.raycaster.setFromCamera(function(t){var e=new u.u;return e.x=t.clientX/window.innerWidth*2-1,e.y=-t.clientY/window.innerHeight*2+1,e}(t),this.camera),this.raycaster.intersectObjects(this.scene.children)}},{key:"hoverDataPoints",value:function(t){var e,n=Object(k.a)(this.intersects);try{for(n.s();!(e=n.n()).done;){var a=e.value,i=this.datapoints[a];i.toggleHovered(),i.clicked||this.scene.remove(i.mesh2)}}catch(l){n.e(l)}finally{n.f()}this.intersects.length=0;var s,r=this.updateIntersects(t),o=Object(k.a)(r);try{for(o.s();!(s=o.n()).done;){var c=s.value;if(""!==c.object.name){var h=this.datapoints[c.object.name];h.toggleHovered(),this.scene.add(h.mesh2),this.intersects.push(c.object.name)}}}catch(l){o.e(l)}finally{o.f()}this.intersects.length>0?document.body.style.cursor="pointer":document.body.style.cursor="default"}},{key:"clickDataPoints",value:function(t){var e,n=this.updateIntersects(t),a=Object(k.a)(n);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(""!==i.object.name){var s=this.datapoints[i.object.name];s.clicked?this.scene.remove(s.mesh2):this.scene.add(s.mesh2),s.toggleClicked()}}}catch(r){a.e(r)}finally{a.f()}}},{key:"createDataPointInteractions",value:function(){var t=this;window.addEventListener("mousemove",(function(e){return t.hoverDataPoints(e)}),!1),window.addEventListener("mousedown",(function(e){t.clickDataPoints(e),t.hoverDataPoints(e)}),!1)}}]),t}(),D=function(){function t(e,n){Object(r.a)(this,t),this.mesh=e,this.mesh2=n,this.hovered=!1,this.clicked=!1}return Object(o.a)(t,[{key:"toggleHovered",value:function(){this.hovered=!this.hovered,this.clicked||(this.hovered?(this.mesh.material.color.set(16711680),this.mesh2.material.color.set(16711680)):(this.mesh.material.color.set(16777215),this.mesh2.material.color.set(16777215)))}},{key:"toggleClicked",value:function(){this.clicked=!this.clicked,this.clicked?(this.mesh.material.color.set(65535),this.mesh2.material.color.set(65535),this.mesh.scale.set(2,2,2)):this.mesh.scale.set(1,1,1)}}]),t}(),P=n.p+"static/media/test.004e802c.txt",_=n(13),x=function(t){Object(c.a)(n,t);var e=Object(h.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=function(t){var e=new u.p,n=new u.l(75,window.innerWidth/window.innerHeight,.1);n.position.copy(t);var a=new u.w;return a.setSize(window.innerWidth,window.innerHeight),a.shadowMap.enabled=!0,a.shadowMap.type=u.k,new v.a(n,a.domElement).update(),[e,n,a]}(new u.v(0,0,3)),e=Object(s.a)(t,3),n=e[0],a=e[1],i=e[2];this.mount.appendChild(i.domElement),b(n,a,i),fetch(P).then((function(t){return t.text()})).then((function(t){return new O("satellite-tle",t,1/6378,n,a,i)}))}},{key:"render",value:function(){var t=this;return Object(_.jsx)("div",{className:"app",ref:function(e){return t.mount=e}})}}]),n}(d.a.Component);n(24);i.a.render(Object(_.jsx)(x,{}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.43398f4a.chunk.js.map