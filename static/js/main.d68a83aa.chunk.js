(this.webpackJsonpeovisualiser=this.webpackJsonpeovisualiser||[]).push([[0],{16:function(e){e.exports=JSON.parse('{"server":"https://sleepy-fortress-45212.herokuapp.com/eovisualiser/","routes":{"satellite-tle":"satellite-tle"}}')},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var a=n(17),i=n.n(a),s=n(9),r=n(0),o=n(1),c=n(2),h=n(3),l=n(12),u=n.n(l),d=n(5),v=n(18),p=n(11);function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=t/864e5-t.getTimezoneOffset()/1440+2440587.5;switch(e){case"julian":return n;case"j2000":return n-2451545;case"gmst":return p.b(t);default:return t}}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m("j2000");return(23.439-4e-7*e)*Math.PI/180}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m("j2000"),t=280.46+.9856474*e,n=357.528+.9856003*e,a=w(e);n=n%360*Math.PI/180;var i=t+1.915*Math.sin(n)+.02*Math.sin(2*n);i=i*Math.PI/180;var s=Math.atan2(Math.cos(a)*Math.sin(i),Math.cos(i)),r=Math.asin(Math.sin(a)*Math.sin(i));return[s,r]}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m("j2000"),t=f(e),n=Object(s.a)(t,2),a=n[0],i=n[1],r=new d.c(0,a,i,"XYZ"),o=new d.v(1,0,0);return o.applyEuler(r),o}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m("gmst");return e}var j=n.p+"static/media/earth_2k.981cc3e3.jpg";function b(e,t,n){var a=new d.q(1,60,60),i=new d.i({color:0,side:d.a}),s=new d.h(a,i);s.scale.set(100,100,100),e.add(s);var r=y();r.multiplyScalar(80);var o=new d.m(16777215,1);o.position.copy(r),e.add(o);var c=new d.i,h=new d.h(a,c);h.scale.set(2,2,2),h.position.copy(r),e.add(h);var l=new d.j({map:M(j),metalness:.4,roughness:.8}),u=new d.h(a,l);u.rotation.set(0,g(),0),e.add(u),function a(){requestAnimationFrame(a),n.render(e,t)}()}function M(e){return(new d.t).load(e)}var k=n(10),O=function(){function e(t,n,a,i,s,o){switch(Object(r.a)(this,e),this.raw_data=n,this.scale_factor=a,this.datapoints={},this.scene=i,this.camera=s,this.renderer=o,this.sphere_geometry=new d.q(.01,3,3),this.sphere_material=new d.i,this.line_material=new d.f,this.intersects=[],this.raycaster=new d.o,this.createDataPointInteractions(),this.type=t,this.type){case"satellite-tle":this.processTLEData()}this.renderDataPoints()}return Object(o.a)(e,[{key:"processTLEData",value:function(){for(var e=this.raw_data.split(/\r?\n/),t=new Date,n=5.9722*Math.pow(10,24),a=6.674*Math.pow(10,-11)*n,i=0;i<(e.length-1)/3;i++){var s=3*i,r=p.d(e[s+1],e[s+2]),o=p.c(r,t);if(void 0!==o.position){var c=o.position,h=o.velocity,l=new d.v(h.x,h.z,-h.y),u=new d.v(c.x,c.z,-c.y);l.multiplyScalar(this.scale_factor),u.multiplyScalar(this.scale_factor);var v=p.a(c,m("gmst"));new d.v(v.x,v.z,-v.y).multiplyScalar(this.scale_factor);var w=new d.h(this.sphere_geometry,this.sphere_material.clone());w.position.copy(u),w.name=e[s];for(var f=[],y=Math.cbrt(a/Math.pow(r.no/60,2))*Math.pow(10,-3)*this.scale_factor,g=y*Math.sqrt(1-Math.pow(r.ecco,2)),j=Math.sqrt(Math.pow(y,2)-Math.pow(g,2)),b=0;b<=80;b++){var M=2*b*Math.PI/80,k=new d.v(y*Math.cos(M),0,-g*Math.sin(M));f.push(k)}var O=(new d.b).setFromPoints(f),P=new d.e(O,this.line_material.clone());P.rotateOnAxis(new d.v(0,1,0),r.nodeo),P.rotateOnAxis(new d.v(1,0,0),r.inclo),P.rotateOnAxis(new d.v(0,1,0),r.argpo),P.translateOnAxis(new d.v(1,0,0),-j);var _=new D(w,P);this.datapoints[e[s]]=_}}}},{key:"renderDataPoints",value:function(){for(var e in this.datapoints)this.scene.add(this.datapoints[e].mesh)}},{key:"updateIntersects",value:function(e){return this.raycaster.setFromCamera(function(e){var t=new d.u;return t.x=e.clientX/window.innerWidth*2-1,t.y=-e.clientY/window.innerHeight*2+1,t}(e),this.camera),this.raycaster.intersectObjects(this.scene.children)}},{key:"hoverDataPoints",value:function(e){var t,n=Object(k.a)(this.intersects);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=this.datapoints[a];i.toggleHovered(),i.clicked||this.scene.remove(i.mesh2)}}catch(l){n.e(l)}finally{n.f()}this.intersects.length=0;var s,r=this.updateIntersects(e),o=Object(k.a)(r);try{for(o.s();!(s=o.n()).done;){var c=s.value;if(""!==c.object.name){var h=this.datapoints[c.object.name];h.toggleHovered(),this.scene.add(h.mesh2),this.intersects.push(c.object.name)}}}catch(l){o.e(l)}finally{o.f()}this.intersects.length>0?document.body.style.cursor="pointer":document.body.style.cursor="default"}},{key:"clickDataPoints",value:function(e){var t,n=this.updateIntersects(e),a=Object(k.a)(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(""!==i.object.name){var s=this.datapoints[i.object.name];s.clicked?this.scene.remove(s.mesh2):this.scene.add(s.mesh2),s.toggleClicked()}}}catch(r){a.e(r)}finally{a.f()}}},{key:"createDataPointInteractions",value:function(){var e=this;window.addEventListener("mousemove",(function(t){return e.hoverDataPoints(t)}),!1),window.addEventListener("mousedown",(function(t){e.clickDataPoints(t),e.hoverDataPoints(t)}),!1)}}]),e}(),D=function(){function e(t,n){Object(r.a)(this,e),this.mesh=t,this.mesh2=n,this.hovered=!1,this.clicked=!1}return Object(o.a)(e,[{key:"toggleHovered",value:function(){this.hovered=!this.hovered,this.clicked||(this.hovered?(this.mesh.material.color.set(16711680),this.mesh2.material.color.set(16711680)):(this.mesh.material.color.set(16777215),this.mesh2.material.color.set(16777215)))}},{key:"toggleClicked",value:function(){this.clicked=!this.clicked,this.clicked?(this.mesh.material.color.set(65535),this.mesh2.material.color.set(65535),this.mesh.scale.set(2,2,2)):this.mesh.scale.set(1,1,1)}}]),e}(),P=(n.p,n(16)),_=n(13),x=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=function(e){var t=new d.p,n=new d.l(75,window.innerWidth/window.innerHeight,.1);n.position.copy(e);var a=new d.w;return a.setSize(window.innerWidth,window.innerHeight),a.shadowMap.enabled=!0,a.shadowMap.type=d.k,new v.a(n,a.domElement).update(),[t,n,a]}(new d.v(0,0,3)),t=Object(s.a)(e,3),n=t[0],a=t[1],i=t[2];this.mount.appendChild(i.domElement),b(n,a,i);var r=P.server+P.routes["satellite-tle"];fetch(r).then((function(e){return e.text()})).then((function(e){return new O("satellite-tle",e,1/6378,n,a,i)}))}},{key:"render",value:function(){var e=this;return Object(_.jsx)("div",{className:"app",ref:function(t){return e.mount=t}})}}]),n}(u.a.Component);n(25);i.a.render(Object(_.jsx)(x,{}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.d68a83aa.chunk.js.map