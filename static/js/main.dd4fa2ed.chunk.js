(this.webpackJsonpeovisualiser=this.webpackJsonpeovisualiser||[]).push([[0],{16:function(e){e.exports=JSON.parse('{"server":"https://sleepy-fortress-45212.herokuapp.com/eovisualiser/","routes":{"satellite-tle":"satellite-tle"}}')},25:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n=a(17),i=a.n(n),s=a(12),r=a(0),o=a(1),c=a(2),h=a(3),l=a(11),d=a.n(l),u=a(5),v=a(18),p=a(13);function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,a=t/864e5-t.getTimezoneOffset()/1440+2440587.5;switch(e){case"julian":return a;case"j2000":return a-2451545;case"gmst":return p.b(t);default:return t}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m("j2000");return(23.439-4e-7*e)*Math.PI/180}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m("j2000"),t=280.46+.9856474*e,a=357.528+.9856003*e,n=f(e);a=a%360*Math.PI/180;var i=t+1.915*Math.sin(a)+.02*Math.sin(2*a);i=i*Math.PI/180;var s=Math.atan2(Math.cos(n)*Math.sin(i),Math.cos(i)),r=Math.asin(Math.sin(n)*Math.sin(i));return[s,r]}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m("j2000"),t=w(e),a=Object(s.a)(t,2),n=a[0],i=a[1],r=new u.c(0,n,i,"XYZ"),o=new u.v(1,0,0);return o.applyEuler(r),o}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m("gmst");return e}var j=a.p+"static/media/earth_2k.981cc3e3.jpg";function k(e,t,a){var n=new u.q(1,60,60),i=new u.i({color:0,side:u.a}),s=new u.h(n,i);s.scale.set(100,100,100),e.add(s);var r=y();r.multiplyScalar(80);var o=new u.m(16777215,1);o.position.copy(r),e.add(o);var c=new u.i,h=new u.h(n,c);h.scale.set(2,2,2),h.position.copy(r),e.add(h);var l=new u.j({map:g(j),metalness:.4,roughness:.8}),d=new u.h(n,l);d.rotation.set(0,b(),0),e.add(d),function n(){requestAnimationFrame(n),a.render(e,t)}()}function g(e){return(new u.t).load(e)}var O=a(9),M=function(){function e(t,a,n,i,s,o,c){switch(Object(r.a)(this,e),this.raw_data=a,this.scale_factor=n,this.datapoints={},this.scene=i,this.camera=s,this.renderer=o,this.updater=c,this.sphere_geometry=new u.q(.01,3,3),this.sphere_material=new u.i,this.line_material=new u.f,this.intersects=[],this.raycaster=new u.o,this.createDataPointInteractions(),this.type=t,this.type){case"satellite-tle":this.processTLEData()}this.renderDataPoints()}return Object(o.a)(e,[{key:"processTLEData",value:function(){for(var e=this.raw_data.split(/\r?\n/),t=new Date,a=5.9722*Math.pow(10,24),n=6.674*Math.pow(10,-11)*a,i=0;i<(e.length-1)/3;i++){var s=3*i,r=p.d(e[s+1],e[s+2]),o=p.c(r,t);if(void 0!==o.position){var c=o.position,h=o.velocity,l=new u.v(h.x,h.z,-h.y),d=new u.v(c.x,c.z,-c.y);l.multiplyScalar(this.scale_factor),d.multiplyScalar(this.scale_factor);var v=p.a(c,m("gmst"));new u.v(v.x,v.z,-v.y).multiplyScalar(this.scale_factor);var f=new u.h(this.sphere_geometry,this.sphere_material.clone());f.position.copy(d),f.name=e[s];for(var w=[],y=Math.cbrt(n/Math.pow(r.no/60,2))*Math.pow(10,-3)*this.scale_factor,b=y*Math.sqrt(1-Math.pow(r.ecco,2)),j=Math.sqrt(Math.pow(y,2)-Math.pow(b,2)),k=0;k<=80;k++){var g=2*k*Math.PI/80,O=new u.v(y*Math.cos(g),0,-b*Math.sin(g));w.push(O)}var M=(new u.b).setFromPoints(w),C=new u.e(M,this.line_material.clone());C.rotateOnAxis(new u.v(0,1,0),r.nodeo),C.rotateOnAxis(new u.v(1,0,0),r.inclo),C.rotateOnAxis(new u.v(0,1,0),r.argpo),C.translateOnAxis(new u.v(1,0,0),-j);var D=new x(f,C);this.datapoints[e[s]]=D}}}},{key:"renderDataPoints",value:function(){for(var e in this.datapoints)this.scene.add(this.datapoints[e].mesh)}},{key:"updateIntersects",value:function(e){return this.raycaster.setFromCamera(function(e){var t=new u.u;return t.x=e.clientX/window.innerWidth*2-1,t.y=-e.clientY/window.innerHeight*2+1,t}(e),this.camera),this.raycaster.intersectObjects(this.scene.children)}},{key:"hoverDataPoints",value:function(e){var t,a=Object(O.a)(this.intersects);try{for(a.s();!(t=a.n()).done;){var n=t.value,i=this.datapoints[n];i.toggleHovered(),i.clicked||this.scene.remove(i.mesh2)}}catch(l){a.e(l)}finally{a.f()}this.intersects.length=0;var s,r=this.updateIntersects(e),o=Object(O.a)(r);try{for(o.s();!(s=o.n()).done;){var c=s.value;if(""!==c.object.name){var h=this.datapoints[c.object.name];h.toggleHovered(),this.scene.add(h.mesh2),this.intersects.push(c.object.name)}}}catch(l){o.e(l)}finally{o.f()}this.intersects.length>0&&this.updater(this.intersects[0],"hover"),this.intersects.length>0?document.body.style.cursor="pointer":document.body.style.cursor="default"}},{key:"clickDataPoints",value:function(e){var t,a=this.updateIntersects(e),n=Object(O.a)(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(""!==i.object.name){var s=this.datapoints[i.object.name];s.clicked?this.scene.remove(s.mesh2):this.scene.add(s.mesh2),s.clicked?this.updater(i.object.name,"click-remove"):this.updater(i.object.name,"click-add"),s.toggleClicked()}}}catch(r){n.e(r)}finally{n.f()}}},{key:"createDataPointInteractions",value:function(){var e=this;window.addEventListener("mousemove",(function(t){return e.hoverDataPoints(t)}),!1),window.addEventListener("mousedown",(function(t){e.clickDataPoints(t),e.hoverDataPoints(t)}),!1)}}]),e}(),x=function(){function e(t,a){Object(r.a)(this,e),this.mesh=t,this.mesh2=a,this.hovered=!1,this.clicked=!1}return Object(o.a)(e,[{key:"toggleHovered",value:function(){this.hovered=!this.hovered,this.clicked||(this.hovered?(this.mesh.material.color.set(16711680),this.mesh2.material.color.set(16711680)):(this.mesh.material.color.set(16777215),this.mesh2.material.color.set(16777215)))}},{key:"toggleClicked",value:function(){this.clicked=!this.clicked,this.clicked?(this.mesh.material.color.set(65535),this.mesh2.material.color.set(65535),this.mesh.scale.set(2,2,2)):this.mesh.scale.set(1,1,1)}}]),e}(),C=(a.p,a(16)),D=a(7),P=function(e){Object(c.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).updateDisplay=function(e,t){switch(t){case"hover":[e]!==n.state.datapointHovered&&n.setState({datapointHovered:[e]});break;case"click-add":var a=n.state.datapointsClicked;"Click!"===a[0]&&(a=[]),a.push(e),n.setState({datapointsClicked:a});break;case"click-remove":var i=(a=n.state.datapointsClicked).indexOf(e);a.splice(i,1),n.setState({datapointsClicked:a})}},n.state={datapointHovered:["Hover!"],datapointsClicked:["Click!"]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=function(e){var t=new u.p,a=new u.l(75,window.innerWidth/window.innerHeight,.1);a.position.copy(e);var n=new u.w;return n.setSize(window.innerWidth,window.innerHeight),n.shadowMap.enabled=!0,n.shadowMap.type=u.k,new v.a(a,n.domElement).update(),[t,a,n]}(new u.v(0,0,3)),a=Object(s.a)(t,3),n=a[0],i=a[1],r=a[2];this.mount.appendChild(r.domElement),k(n,i,r);var o=C.server+C.routes["satellite-tle"];fetch(o).then((function(e){return e.text()})).then((function(t){return new M("satellite-tle",t,1/6378,n,i,r,e.updateDisplay)}))}},{key:"render",value:function(){var e=this;return Object(D.jsx)("div",{className:"app",ref:function(t){return e.mount=t},children:Object(D.jsxs)("div",{className:"infos-container",children:[Object(D.jsx)(_,{info:this.state.datapointHovered,style:{backgroundColor:"rgb(100,0,0)"}}),Object(D.jsx)(_,{info:this.state.datapointsClicked,style:{backgroundColor:"rgb(0,100,100)",top:"20vh"}})]})})}}]),a}(d.a.Component),_=function(e){Object(c.a)(a,e);var t=Object(h.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e,t=[],a=Object(O.a)(this.props.info);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(Object(D.jsx)("div",{className:"info-text",children:n}))}}catch(i){a.e(i)}finally{a.f()}return Object(D.jsx)("div",{className:"info-container",style:this.props.style,children:t})}}]),a}(d.a.Component);a(25);i.a.render(Object(D.jsx)(P,{}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.dd4fa2ed.chunk.js.map